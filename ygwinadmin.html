<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MASTER PANEL | myselfyg26</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body { background: #000; color: #0f0; font-family: monospace; }</style>
</head>
<body class="p-6">
    <div id="lock" class="max-w-sm mx-auto mt-20 border p-8 text-center">
        <h1 class="mb-4">YGWIN ADMIN</h1>
        <input type="password" id="p" placeholder="Password" class="bg-black border p-2 w-full mb-4">
        <button onclick="auth()" class="bg-green-900 w-full py-2 font-bold">UNSEAL</button>
    </div>

    <div id="panel" class="hidden max-w-6xl mx-auto">
        <h1 class="text-3xl font-black border-b mb-10 pb-2">CONSOLE :: myselfyg26</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="border p-4 rounded-xl">
                <h2 class="text-red-500 font-bold mb-4">FORCE RESULT</h2>
                <div class="flex gap-2 mb-2">
                    <button onclick="setR('Big')" class="bg-orange-900 flex-1 py-2">BIG</button>
                    <button onclick="setR('Small')" class="bg-blue-950 flex-1 py-2">SMALL</button>
                </div>
                <button onclick="setR('Random')" class="w-full bg-gray-800 py-1 text-xs">AUTO</button>
            </div>

            <div class="border p-4 rounded-xl">
                <h2 class="text-yellow-500 font-bold mb-4 uppercase">Deposits</h2>
                <div id="deps" class="text-[10px] space-y-4 max-h-60 overflow-y-auto"></div>
            </div>

            <div class="border p-4 rounded-xl">
                <h2 class="text-blue-500 font-bold mb-4 uppercase">Withdraws</h2>
                <div id="wits" class="text-[10px] space-y-4 max-h-60 overflow-y-auto"></div>
            </div>

            <div class="border p-4 rounded-xl">
                <h2 class="text-white font-bold mb-4 uppercase">QR Settings</h2>
                <input type="file" id="qrf" class="text-[10px] mb-2">
                <button onclick="upQR()" class="bg-blue-900 w-full py-1 text-xs">SET QR</button>
            </div>
        </div>

        <div class="mt-10 border p-6">
            <h2 class="text-green-500 font-bold mb-4 underline">MEMBER DATABASE</h2>
            <table class="w-full text-[10px] text-left">
                <thead><tr><th>PHONE</th><th>PASS</th><th>WALLET</th></tr></thead>
                <tbody id="ut"></tbody>
            </table>
        </div>
    </div>

    <script>
        function auth() { if(document.getElementById('p').value === 'myselfyg26') { document.getElementById('lock').classList.add('hidden'); document.getElementById('panel').classList.remove('hidden'); load(); } }
        function setR(v) { localStorage.setItem('yg_force', v); alert("Forced: " + v); }

        function load() {
            let u = JSON.parse(localStorage.getItem('yg_users') || "[]");
            document.getElementById('ut').innerHTML = u.map(i => `<tr><td>${i.phone}</td><td>${i.pass}</td><td>₹${i.wallet}</td></tr>`).join('');

            let d = JSON.parse(localStorage.getItem('yg_deposits') || "[]");
            document.getElementById('deps').innerHTML = d.filter(x => x.status === 'Pending').map(x => `
                <div class="border-b border-gray-800 pb-2">
                    ${x.phone} | ₹${x.amt} | UTR: ${x.utr}
                    <div class="mt-2 flex gap-2">
                        <button onclick="appDep(${x.id}, true)" class="bg-green-700 px-2">Approve</button>
                        <button onclick="appDep(${x.id}, false)" class="bg-red-900 px-2">Reject</button>
                    </div>
                </div>
            `).join('');

            let w = JSON.parse(localStorage.getItem('yg_withdraws') || "[]");
            document.getElementById('wits').innerHTML = w.filter(x => x.status === 'Pending').map(x => `
                <div class="border-b border-gray-800 pb-2">
                    ${x.phone} | ₹${x.amt} <br> ${x.upi} | ${x.name}
                    <div class="mt-2 flex gap-2">
                        <button onclick="appWit(${x.id}, true)" class="bg-green-700 px-2">Approve</button>
                        <button onclick="appWit(${x.id}, false)" class="bg-red-900 px-2">Reject</button>
                    </div>
                </div>
            `).join('');
        }

        function appDep(id, s) {
            let rs = JSON.parse(localStorage.getItem('yg_deposits'));
            let r = rs.find(i => i.id === id);
            if(s) {
                let us = JSON.parse(localStorage.getItem('yg_users'));
                let idx = us.findIndex(i => i.phone === r.phone);
                us[idx].wallet += parseFloat(r.amt);
                localStorage.setItem('yg_users', JSON.stringify(us));
                r.status = 'Approved';
            } else { r.status = 'Rejected'; }
            localStorage.setItem('yg_deposits', JSON.stringify(rs));
            load();
        }

        function appWit(id, s) {
            let rs = JSON.parse(localStorage.getItem('yg_withdraws'));
            let r = rs.find(i => i.id === id);
            if(s) { r.status = 'Approved'; } 
            else {
                let us = JSON.parse(localStorage.getItem('yg_users'));
                let idx = us.findIndex(i => i.phone === r.phone);
                us[idx].wallet += parseFloat(r.amt); // Refund on reject
                localStorage.setItem('yg_users', JSON.stringify(us));
                r.status = 'Rejected';
            }
            localStorage.setItem('yg_withdraws', JSON.stringify(rs));
            load();
        }

        function upQR() {
            let f = document.getElementById('qrf').files[0];
            let rd = new FileReader();
            rd.onload = (e) => { localStorage.setItem('yg_qr', e.target.result); alert("QR Set!"); };
            rd.readAsDataURL(f);
        }
    </script>
</body>
</html>
