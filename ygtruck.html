<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>YG TRUCKS - Realistic</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    canvas { display: block; }
    #controls {
      position: absolute; bottom: 20px; left: 20px;
      display: flex; gap: 10px;
    }
    .btn {
      width: 50px; height: 50px; font-size: 24px;
      background: #fff3; color: white; border: 1px solid #888;
      border-radius: 10px;
    }
    #viewBtn { position: absolute; top: 10px; right: 10px; }
    #dayNightBtn { position: absolute; top: 50px; right: 10px; }
  </style>
</head>
<body>
  <div id="controls">
    <button class="btn" onclick="steer('left')">‚¨Ö</button>
    <button class="btn" onclick="move('forward')">‚¨Ü</button>
    <button class="btn" onclick="steer('right')">‚û°</button>
  </div>
  <button id="viewBtn" class="btn" onclick="toggleView()">üëÅ</button>
  <button id="dayNightBtn" class="btn" onclick="toggleDayNight()">üåó</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

  <script>
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    let renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    let isNight = false;
    let viewInside = false;

    // Light
    const ambient = new THREE.AmbientLight(0xffffff, 1);
    scene.add(ambient);

    // Ground (road)
    const ground = new THREE.Mesh(
      new THREE.PlaneGeometry(200, 1000),
      new THREE.MeshLambertMaterial({ color: 0x333333 })
    );
    ground.rotation.x = -Math.PI / 2;
    scene.add(ground);

    // Truck
    let truck;
    const loader = new THREE.GLTFLoader();
    loader.load('truck.glb', function(gltf) {
      truck = gltf.scene;
      truck.scale.set(1, 1, 1);
      scene.add(truck);
      truck.position.set(0, 0, 0);
      truck.rotation.y = Math.PI;
    });

    camera.position.set(0, 5, 10);

    // Sounds
    const horn = new Audio('horn.mp3');
    const engine = new Audio('engine.mp3');
    engine.loop = true;
    engine.volume = 0.5;
    engine.play();

    // Movement
    let speed = 0;
    let angle = 0;

    function move(dir) {
      speed = dir === 'forward' ? 0.1 : 0;
      engine.play();
    }

    function steer(dir) {
      if (dir === 'left') angle += 0.03;
      if (dir === 'right') angle -= 0.03;
    }

    function toggleView() {
      viewInside = !viewInside;
    }

    function toggleDayNight() {
      isNight = !isNight;
      ambient.intensity = isNight ? 0.1 : 1;
      renderer.setClearColor(isNight ? 0x000022 : 0x87ceeb);
    }

    function animate() {
      requestAnimationFrame(animate);

      if (truck) {
        truck.rotation.y = angle;
        truck.position.x -= Math.sin(angle) * speed;
        truck.position.z -= Math.cos(angle) * speed;

        if (viewInside) {
          camera.position.set(
            truck.position.x,
            truck.position.y + 1.5,
            truck.position.z - 1
          );
        } else {
          camera.position.set(
            truck.position.x - Math.sin(angle) * 10,
            truck.position.y + 5,
            truck.position.z - Math.cos(angle) * 10
          );
        }

        camera.lookAt(truck.position);
      }

      renderer.render(scene, camera);
    }

    animate();
  </script>
</body>
    </html>
