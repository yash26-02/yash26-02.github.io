<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BIG SMALL Predictor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #0f2027;
      color: white;
      padding: 20px;
    }
    h1 {
      font-size: 26px;
      margin-bottom: 10px;
    }
    #prediction {
      font-size: 38px;
      font-weight: bold;
      color: #00ffcc;
      margin: 10px 0;
    }
    .timer {
      font-size: 24px;
      margin: 10px 0;
      color: #ffcc00;
    }
    #period {
      font-size: 18px;
      margin: 10px 0;
    }
    button {
      font-size: 16px;
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .win { background: #4CAF50; color: white; }
    .loss { background: #f44336; color: white; }
    #history {
      margin-top: 20px;
      max-height: 200px;
      overflow-y: auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
      border-radius: 10px;
    }
    audio { display: none; }
  </style>
</head>
<body>

  <h1>üîÆ BIG SMALL Predictor</h1>
  <div id="period">Period: Loading...</div>
  <div class="timer" id="timer">‚è≥ Loading...</div>
  <div id="prediction">Prediction: --</div>
  
  <button class="win" onclick="addResult('Win')">‚úÖ Win</button>
  <button class="loss" onclick="addResult('Loss')">‚ùå Loss</button>

  <div id="history"></div>

  <audio id="sound">
    <source src="https://www.soundjay.com/button/sounds/beep-07.mp3" type="audio/mpeg">
  </audio>

  <script>
    const predictionEl = document.getElementById("prediction");
    const periodEl = document.getElementById("period");
    const timerEl = document.getElementById("timer");
    const historyEl = document.getElementById("history");
    const sound = document.getElementById("sound");

    // Fix prediction across refresh
    const savedPrediction = localStorage.getItem("prediction");
    const savedPeriod = localStorage.getItem("period");

    function generatePrediction(period) {
      // Dummy logic: alternate based on even/odd minute
      const now = new Date();
      const minute = now.getUTCMinutes();
      const prediction = (minute % 2 === 0) ? "BIG" : "SMALL";
      localStorage.setItem("prediction", prediction);
      localStorage.setItem("period", period);
      return prediction;
    }

    function updatePeriodAndTimer() {
      const now = new Date();
      const utc = new Date(now.toUTCString().slice(0, -4));
      const seconds = utc.getUTCSeconds();
      const remaining = 60 - seconds;
      const hours = utc.getUTCHours();
      const minutes = utc.getUTCMinutes();
      const totalMinutes = hours * 60 + minutes;

      const period = `${utc.getUTCFullYear()}${String(utc.getUTCMonth()+1).padStart(2, '0')}${String(utc.getUTCDate()).padStart(2, '0')}1000${10001 + totalMinutes}`;
      periodEl.innerText = "Period: " + period;
      timerEl.innerText = `‚è≥ 00:${String(remaining).padStart(2, '0')}`;

      // Update prediction only if period changed
      if (localStorage.getItem("period") !== period) {
        const prediction = generatePrediction(period);
        predictionEl.innerText = "Prediction: " + prediction;
        sound.play();
      } else {
        predictionEl.innerText = "Prediction: " + localStorage.getItem("prediction");
      }
    }

    function addResult(result) {
      const entry = document.createElement("div");
      entry.innerText = `üïí ${new Date().toLocaleTimeString()} - ${periodEl.innerText} - ${predictionEl.innerText} - ${result}`;
      historyEl.prepend(entry);
    }

    // Initial run
    updatePeriodAndTimer();
    setInterval(updatePeriodAndTimer, 1000); // update every second
  </script>

</body>
    </html>
