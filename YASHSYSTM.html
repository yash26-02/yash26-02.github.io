<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YASH PVT Predictor</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #111111;
      --card: #f5f5f5;
      --accent: #ffcc00;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 1rem;
    }

    h1 {
      text-align: center;
    }

    .container {
      max-width: 500px;
      margin: auto;
    }

    .info-box, .history-box {
      background: var(--card);
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .prediction {
      font-size: 2rem;
      font-weight: bold;
      color: var(--accent);
      text-align: center;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }

    select, button {
      padding: 0.5rem 1rem;
      border-radius: 10px;
      border: none;
      font-size: 1rem;
    }

    .theme-dark {
      --bg: #111111;
      --text: #f1f1f1;
      --card: #1e1e1e;
      --accent: #00ffff;
    }

    .theme-light {
      --bg: #ffffff;
      --text: #111111;
      --card: #f5f5f5;
      --accent: #ffcc00;
    }

    .theme-royal {
      --bg: #2e2459;
      --text: #ffffff;
      --card: #3c2f78;
      --accent: #ff66cc;
    }

    .theme-matrix {
      --bg: #000000;
      --text: #00ff00;
      --card: #001100;
      --accent: #00ff00;
    }

    .btn-clear {
      background: #ff4444;
      color: white;
      margin-top: 10px;
      width: 100%;
    }

  </style>
</head>
<body>
  <div class="container">
    <h1>YASH PVT Predictor</h1>

    <div class="controls">
      <select id="themeSelect">
        <option value="light">Light</option>
        <option value="dark">Dark</option>
        <option value="royal">Royal Gold</option>
        <option value="matrix">Matrix</option>
      </select>
      <button onclick="predict()">Predict</button>
    </div>

    <div class="info-box">
      <div>Current Period: <span id="period">--</span></div>
      <div>Countdown: <span id="countdown">--</span></div>
      <div class="prediction" id="predictionResult">Prediction: --</div>
    </div>

    <div class="history-box" id="historyBox">
      <h3>Prediction History</h3>
      <ul id="historyList"></ul>
      <button class="btn-clear" onclick="clearHistory()">Clear History</button>
    </div>
  </div>

  <script>
    const predictionEl = document.getElementById('predictionResult');
    const historyList = document.getElementById('historyList');
    const countdownEl = document.getElementById('countdown');
    const periodEl = document.getElementById('period');
    const themeSelect = document.getElementById('themeSelect');

    let countdown = 30;
    let currentPeriod = getNewPeriod();
    let currentPrediction = '';

    function getNewPeriod() {
      const now = new Date();
      return `${now.getHours()}${now.getMinutes()}${now.getSeconds()}`;
    }

    function predict() {
      const result = Math.random() > 0.5 ? 'BIG' : 'SMALL';
      currentPrediction = result;
      predictionEl.textContent = `Prediction: ${result}`;
      localStorage.setItem('prediction', result);
      localStorage.setItem('period', currentPeriod);
      addToHistory(result, currentPeriod);
    }

    function addToHistory(pred, period) {
      const li = document.createElement('li');
      li.textContent = `${period}: ${pred}`;
      historyList.prepend(li);

      let saved = JSON.parse(localStorage.getItem('history') || '[]');
      saved.unshift({ pred, period });
      localStorage.setItem('history', JSON.stringify(saved));
    }

    function clearHistory() {
      historyList.innerHTML = '';
      localStorage.removeItem('history');
    }

    function loadHistory() {
      const saved = JSON.parse(localStorage.getItem('history') || '[]');
      saved.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.period}: ${item.pred}`;
        historyList.appendChild(li);
      });
    }

    function updateCountdown() {
      countdown--;
      countdownEl.textContent = `${countdown}s`;

      if (countdown <= 0) {
        countdown = 30;
        currentPeriod = getNewPeriod();
        periodEl.textContent = currentPeriod;
        // Do NOT change prediction automatically
      }
    }

    function applyTheme(theme) {
      document.body.className = `theme-${theme}`;
      localStorage.setItem('theme', theme);
    }

    themeSelect.addEventListener('change', () => {
      applyTheme(themeSelect.value);
    });

    function init() {
      // Theme
      const savedTheme = localStorage.getItem('theme') || 'light';
      themeSelect.value = savedTheme;
      applyTheme(savedTheme);

      // Prediction
      const savedPeriod = localStorage.getItem('period');
      const savedPrediction = localStorage.getItem('prediction');
      currentPeriod = getNewPeriod();
      periodEl.textContent = currentPeriod;

      if (savedPeriod === currentPeriod && savedPrediction) {
        predictionEl.textContent = `Prediction: ${savedPrediction}`;
      } else {
        predictionEl.textContent = `Prediction: --`;
      }

      // Load history
      loadHistory();

      // Start countdown
      setInterval(updateCountdown, 1000);
    }

    init();
  </script>
</body>
  </html>
