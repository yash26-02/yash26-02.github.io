<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Saheli General Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fefefe;
      margin: 0;
      padding: 0;
    }
    header {
      background: linear-gradient(to right, #fceabb, #f8b500);
      padding: 20px;
      text-align: center;
      color: #fff;
      font-size: 24px;
      font-weight: bold;
      font-family: 'Georgia', serif;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .search-bar {
      margin: 20px;
      display: flex;
      justify-content: center;
    }
    .search-bar input {
      width: 90%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    .products {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .product {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      margin: 10px;
      padding: 10px;
      width: 90%;
      max-width: 300px;
      text-align: center;
    }
    .product img {
      width: 100%;
      border-radius: 10px;
    }
    .product h3 {
      margin: 10px 0 5px;
      font-size: 18px;
    }
    .product p {
      color: #333;
      font-size: 16px;
    }
    .product button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .buy-btn {
      background: #28a745;
      color: white;
    }
    .cart-btn {
      background: #007bff;
      color: white;
    }

    #buyForm {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .form-box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }
    .form-box input, .form-box textarea {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .form-box button {
      width: 100%;
      background: #28a745;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<header>Saheli General Store</header>

<div class="search-bar">
  <input type="text" id="search" placeholder="Search product...">
</div>

<div class="products" id="productList">
  <!-- Products will be loaded here dynamically -->
</div>

<div id="buyForm">
  <div class="form-box">
    <h3>Enter Your Details</h3>
    <input type="text" id="cName" placeholder="Full Name" required>
    <input type="text" id="cNumber" placeholder="Mobile Number" required>
    <input type="text" id="cPin" placeholder="PIN Code (Only 494669)" required>
    <textarea id="cAddress" placeholder="Road, Ward No, Shop Name" rows="3" required></textarea>
    <button onclick="submitOrder()">Submit</button>
  </div>
</div>

<script>
  const products = JSON.parse(localStorage.getItem("products") || "[]");

  const listContainer = document.getElementById("productList");

  function displayProducts(filter = "") {
    listContainer.innerHTML = "";
    products.forEach(product => {
      if (product.name.toLowerCase().includes(filter.toLowerCase())) {
        const card = document.createElement("div");
        card.className = "product";
        card.innerHTML = `
          <img src="${product.image}" alt="Product">
          <h3>${product.name}</h3>
          <p>â‚¹${product.price}</p>
          <button class="buy-btn" onclick="openForm('${product.name}')">Buy Now</button>
          <button class="cart-btn">Add to Cart</button>
        `;
        listContainer.appendChild(card);
      }
    });
  }

  function openForm(productName) {
    localStorage.setItem("orderProduct", productName);
    document.getElementById("buyForm").style.display = "flex";
  }

  function submitOrder() {
    const name = document.getElementById("cName").value.trim();
    const number = document.getElementById("cNumber").value.trim();
    const pin = document.getElementById("cPin").value.trim();
    const address = document.getElementById("cAddress").value.trim();
    if (!name || !number || !pin || !address) {
      alert("Enter Full Details");
      return;
    }
    if (pin !== "494669") {
      alert("Delivery only available in 494669");
      return;
    }

    const order = {
      product: localStorage.getItem("orderProduct"),
      name, number, pin, address,
      status: "Pending"
    };

    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    orders.push(order);
    localStorage.setItem("orders", JSON.stringify(orders));

    alert("Order Placed Successfully!");
    document.getElementById("buyForm").style.display = "none";
  }

  document.getElementById("search").addEventListener("input", e => {
    displayProducts(e.target.value);
  });

  displayProducts();
</script>

</body>
  </html>
